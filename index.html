<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ticket Update Generator (TUG)</title>
  <style>
    body {
      background-color: #3B5CA9;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s;
    }
    /* Three-column layout */
    .page-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      min-height: 100vh;
    }
    .left-container,
    .middle-container,
    .right-container {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    .left-container {
      width: 25%;
      /* Default hidden for testing */
      display: none;
    }
    .middle-container {
      width: 50%;
      position: relative;
    }
    .right-container {
      width: 25%;
      /* Default hidden for testing */
      display: none;
    }
    /* Updated header using flex */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .header h1, .header h2 {
      margin: 0;
      flex: 1;
      text-align: center;
    }
    .subheader {
      text-align: center;
      font-size: 0.9em;
      color: #999;
      margin-bottom: 15px;
      transition: color 0.3s;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    button {
      padding: 10px 15px;
      cursor: pointer;
    }
    /* Ensure buttons fill the width where needed */
    .full-width-btn {
      width: 100%;
      margin-top: 15px;
    }
    /* Center output area styled as a div */
    #result {
      margin-top: 20px;
      white-space: pre-wrap;
      background: #f4f4f4;
      padding: 10px;
      border: 1px solid #ccc;
      min-height: 150px;
      font-size: 14px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    /* Right container output area */
    #ticketCreatorOutput {
      margin-top: 20px;
      white-space: pre-wrap;
      background: #f4f4f4;
      padding: 10px;
      border: 1px solid #ccc;
      min-height: 150px;
      font-size: 14px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    /* Enhanced styling for square radio buttons */
    .radio-group {
      margin-top: 5px;
    }
    .radio-group label {
      display: inline-block;
      margin-right: 15px;
      font-weight: normal;
      cursor: pointer;
    }
    .radio-group input[type="radio"] {
      margin-right: 5px;
      width: 20px;
      height: 20px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      border: 2px solid #555;
      border-radius: 0;
      cursor: pointer;
      position: relative;
      transition: background-color 0.2s ease, border-color 0.2s ease;
    }
    .radio-group input[type="radio"]:checked {
      background-color: #555;
      border-color: #555;
    }
    .radio-group input[type="radio"]:focus {
      outline: none;
      box-shadow: 0 0 2px 2px rgba(85,85,85,0.5);
    }
    /* Containers for input fields within form sections */
    .fields-container {
      margin-top: 15px;
    }
    /* Containers for action and copy buttons */
    .action-container, .copy-container {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .action-container button, .copy-container button {
      flex: 1;
      width: 100%;
    }
    /* Style for call example columns */
    .call-examples-container {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .call-example {
      flex: 1;
    }
    /* Footer styling */
    footer {
      text-align: center;
      margin-top: 20px;
      font-size: 0.8em;
      color: #fff;
    }
    /* Styling for right container message */
    #ticketMessage {
      text-align: center;
      margin-top: 10px;
      opacity: 1;
      transition: opacity 1s ease-out;
    }
    /* Toggle button for dark mode */
    #toggleDarkMode {
      position: relative;
    }
    /* Toggle button for side panels */
    #toggleSidePanels {
      position: relative;
    }
    /* Dark mode styles */
    .dark-mode {
      background-color: #222;
      color: #fff;
    }
    .dark-mode .left-container,
    .dark-mode .middle-container,
    .dark-mode .right-container {
      background-color: #000;
      color: #fff;
      border-color: #555;
    }
    .dark-mode input,
    .dark-mode textarea {
      background-color: #333;
      color: #fff;
      border: 1px solid #555;
    }
    .dark-mode #result,
    .dark-mode #ticketCreatorOutput {
      background-color: #000;
      color: #fff;
      border-color: #555;
    }
    .dark-mode .subheader {
      color: #ccc;
    }
  </style>
</head>
<body>
  <div class="page-container">
    <!-- Left Container: Account Loader (hidden by default) -->
    <div class="left-container">
      <div class="header">
        <h2>Account Loader</h2>
      </div>
      <div class="subheader">Non-functional, for demonstration purposes only</div>
      <form id="leftForm">
        <div class="fields-container">
          <label for="site">Site:</label>
          <input type="text" id="site" placeholder="Enter Site">
        </div>
        <div class="fields-container">
          <label for="address1">Address 1:</label>
          <input type="text" id="address1" placeholder="Enter Address 1">
        </div>
        <div class="fields-container">
          <label for="address2">Address 2:</label>
          <input type="text" id="address2" placeholder="Enter Address 2">
        </div>
        <div class="fields-container">
          <label for="city">City:</label>
          <input type="text" id="city" placeholder="Enter City">
        </div>
        <div class="fields-container">
          <label for="state">State:</label>
          <input type="text" id="state" placeholder="Enter State">
        </div>
        <div class="fields-container">
          <label for="zip">Zip:</label>
          <input type="text" id="zip" placeholder="Enter Zip">
        </div>
        <div class="fields-container">
          <label for="country">Country:</label>
          <input type="text" id="country" placeholder="Enter Country">
        </div>
        <div class="fields-container">
          <label for="contact">Contact:</label>
          <input type="text" id="contact" placeholder="Enter Contact">
        </div>
        <div class="fields-container">
          <label for="phoneNumber">Phone Number:</label>
          <input type="text" id="phoneNumber" placeholder="Enter Phone Number">
        </div>
        <div class="fields-container">
          <label for="email">Email:</label>
          <input type="email" id="email" placeholder="Enter Email">
        </div>
        <!-- Placeholder Button -->
        <button type="button" class="full-width-btn">Pull Account Info</button>
      </form>
    </div>
    
    <!-- Middle Container: Ticket Update Generator -->
    <div class="middle-container">
      <div class="header">
        <button type="button" id="toggleDarkMode">Switch to Dark Mode</button>
        <h1>Ticket Update Generator (TUG)</h1>
        <button type="button" id="toggleSidePanels">Toggle Side Panels</button>
      </div>
      <div class="subheader">Functional Version 1</div>
      <form id="ticketForm">
        <!-- Update Type Radio Buttons (only two options) -->
        <label>Update Type:</label>
        <div class="radio-group">
          <label>
            <input type="radio" name="callType" value="ticketCreation" checked onclick="handleCallTypeChange()">
            Ticket Creation
          </label>
          <label>
            <input type="radio" name="callType" value="nocall" onclick="handleCallTypeChange()">
            General Ticket Update
          </label>
        </div>
        
        <!-- Caller Fields (for ticket creation; hidden when General Ticket Update is selected) -->
        <div id="callerFields" class="fields-container" style="display: none;">
          <label for="callerName">Caller Name:</label>
          <input type="text" id="callerName" placeholder="Enter caller name">
          <label for="callerNumber">Caller Number:</label>
          <input type="text" id="callerNumber" placeholder="Enter caller number">
        </div>
        
        <!-- Ticket Creation Fields -->
        <div id="ticketCreationFields" class="fields-container" style="display: block;">
          <label for="tc_accountNumber">Account Number:</label>
          <input type="text" id="tc_accountNumber" placeholder="Enter account number" required>
          <label for="tc_callersName">Caller's Name:</label>
          <input type="text" id="tc_callersName" placeholder="Enter caller's name" required>
          <label for="tc_callersNumber">Caller's Number:</label>
          <input type="text" id="tc_callersNumber" placeholder="Enter caller's number" required>
          <label for="tc_lconName">LCON Name:</label>
          <input type="text" id="tc_lconName" placeholder="Enter LCON name" required>
          <label for="tc_lconNumber">LCON Number:</label>
          <input type="text" id="tc_lconNumber" placeholder="Enter LCON number" required>
          <label for="tc_businessHours">Business Hours:</label>
          <input type="text" id="tc_businessHours" placeholder="Enter business hours" required>
          <label for="tc_accessHours">Access Hours (For IWs):</label>
          <input type="text" id="tc_accessHours" placeholder="Enter access hours for IWs" required>
          <label for="tc_accessInstructions">Access Special Instructions (e.g., Side door after 5PM):</label>
          <input type="text" id="tc_accessInstructions" placeholder="Enter special access instructions" required>
          <label for="tc_carrierInfo">Carrier Info (Circuit ID/Account/Number):</label>
          <input type="text" id="tc_carrierInfo" placeholder="Enter carrier info" required>
          <!-- New input box for Carrier Ticket -->
          <label for="tc_carrierTicket">Carrier Ticket:</label>
          <input type="text" id="tc_carrierTicket" placeholder="Enter carrier ticket">
          <label for="tc_problemStatement">Current Problem Statement/Issue:</label>
          <input type="text" id="tc_problemStatement" placeholder="Enter problem statement/issue" required>
          <label for="tc_troubleshootingResults">Troubleshooting Performed and Results:</label>
          <input type="text" id="tc_troubleshootingResults" placeholder="Enter troubleshooting performed and results" required>
          <label for="tc_currentStatus">Current Status:</label>
          <input type="text" id="tc_currentStatus" placeholder="Enter current status" required>
          <label for="tc_recommendedNextSteps">Recommended Next Steps:</label>
          <input type="text" id="tc_recommendedNextSteps" placeholder="Enter recommended next steps" required>
        </div>
        
        <!-- Standard Fields for General Ticket Update -->
        <div id="standardFields" class="fields-container" style="display: none;">
          <label for="ticketUpdateReason">Ticket Update Reason:</label>
          <input type="text" id="ticketUpdateReason" placeholder="Enter ticket update reason" required>
          
          <!-- New radio group for call update type -->
          <label>Is this ticket update due to call?</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="updateCallType" value="nocall" checked>
              No Call
            </label>
            <label>
              <input type="radio" name="updateCallType" value="inbound">
              Inbound Call
            </label>
            <label>
              <input type="radio" name="updateCallType" value="outbound">
              Outbound Call
            </label>
          </div>
          
          <label for="currentProblemStatement">Current Problem Statement/Issue:</label>
          <input type="text" id="currentProblemStatement" placeholder="Enter current problem statement/issue" required>
          <label for="troubleshootingResults">Troubleshooting Performed and Results:</label>
          <input type="text" id="troubleshootingResults" placeholder="Enter troubleshooting performed and results" required>
          <label for="currentStatus">Current Status:</label>
          <input type="text" id="currentStatus" placeholder="Enter current status" required>
          <label for="recommendedNextSteps">Recommended Next Steps:</label>
          <input type="text" id="recommendedNextSteps" placeholder="Enter recommended next steps" required>
        </div>
        
        <!-- Dedicated Team Radio Buttons (USPS removed) -->
        <label>Dedicated Team:</label>
        <div class="radio-group" id="providerRadios">
          <label>
            <input type="radio" name="provider" value="" checked onclick="handleProviderChange()">
            None
          </label>
          <label>
            <input type="radio" name="provider" value="voip" onclick="handleProviderChange()">
            VOIP
          </label>
          <label>
            <input type="radio" name="provider" value="grid" onclick="handleProviderChange()">
            GRID
          </label>
        </div>
        
        <!-- Container for Conditional Dedicated Team Fields -->
        <div id="providerFields"></div>
        
        <!-- Troubleshooting/Other Input -->
        <label for="troubleshootingOther">Troubleshooting/Other:</label>
        <textarea id="troubleshootingOther" placeholder="Enter troubleshooting/other details" rows="10"></textarea>
        
        <!-- Action Buttons for Generating and Clearing Template -->
        <div class="action-container">
          <button type="button" onclick="generateTemplate()">Generate Template</button>
          <button type="button" onclick="clearOutput()">Clear All</button>
        </div>
      </form>
      
      <h2>Generated Ticket Template:</h2>
      <div id="result"></div>
      
      <!-- Copy Buttons below the result box -->
      <div class="copy-container">
        <button type="button" onclick="copyFormattedTemplate()">Copy Formatted Template</button>
        <button type="button" onclick="highlightOutput()">Highlight Output</button>
      </div>
    </div>
    
    <!-- Right Container: Ticket Creator (hidden by default) -->
    <div class="right-container" style="display: none;">
      <div class="header">
        <h2>Ticket Creator</h2>
      </div>
      <div class="subheader">Non-functional, for demonstration purposes only</div>
      <!-- Cloned output box for ticket creator -->
      <h2>Ticket Creator Output:</h2>
      <div id="ticketCreatorOutput"></div>
      <button type="button" id="ticketCreatorButton" class="full-width-btn">Create Ticket</button>
      <div id="ticketMessage" style="display: none;">Ticket created in ConnectWise!</div>
    </div>
  </div>
  
  <footer>
    Created by Steven Burgos, with invaluable support from my teammates.
  </footer>
  
  <script>
    // Toggle Dark Mode
    document.getElementById("toggleDarkMode").addEventListener("click", function() {
      if(document.body.classList.contains("dark-mode")) {
        document.body.classList.remove("dark-mode");
        this.textContent = "Switch to Dark Mode";
      } else {
        document.body.classList.add("dark-mode");
        this.textContent = "Switch to Light Mode";
      }
    });
    
    function handleCallTypeChange() {
      const callType = document.querySelector('input[name="callType"]:checked')?.value;
      if (callType === "ticketCreation") {
        document.getElementById("ticketCreationFields").style.display = "block";
        document.getElementById("standardFields").style.display = "none";
        document.getElementById("callerFields").style.display = "none";
      } else {
        document.getElementById("ticketCreationFields").style.display = "none";
        document.getElementById("standardFields").style.display = "block";
        document.getElementById("callerFields").style.display = "none";
      }
    }
    
    function handleProviderChange() {
      const provider = document.querySelector('input[name="provider"]:checked')?.value;
      const container = document.getElementById("providerFields");
      if (provider === "voip") {
        container.innerHTML =
          '<label for="phoneNumberIssue">All/Partial/Single Phone Number Issue:</label>' +
          '<input type="text" id="phoneNumberIssue" placeholder="Enter All/Partial/Single Phone Number Issue">' +
          '<label for="numbersAffected">Number(s) Affected:</label>' +
          '<input type="text" id="numbersAffected" placeholder="Enter number(s) affected">' +
          '<label for="callFeaturesAffected">Call Feature(s) Affected:</label>' +
          '<input type="text" id="callFeaturesAffected" placeholder="Enter call feature(s) affected">' +
          '<label for="macAddress">Mac Address:</label>' +
          '<input type="text" id="macAddress" placeholder="Enter Mac Address">' +
          '<label for="serialNumber">Serial Number:</label>' +
          '<input type="text" id="serialNumber" placeholder="Enter Serial Number">' +
          '<label for="adtranIP">Adtran LB IP Address:</label>' +
          '<input type="text" id="adtranIP" placeholder="Enter Adtran LB IP Address">' +
          '<div class="call-examples-container">' +
            '<div class="call-example">' +
              '<strong>Call Examples 1</strong>' +
              '<label for="call1_datetime">Date & Time:</label>' +
              '<input type="text" id="call1_datetime" placeholder="Enter Date & Time">' +
              '<label for="call1_phone">Phone Number:</label>' +
              '<input type="text" id="call1_phone" placeholder="Enter Phone Number">' +
              '<label for="call1_destination">Destination Number:</label>' +
              '<input type="text" id="call1_destination" placeholder="Enter Destination Number">' +
              '<label for="call1_error">Error Received:</label>' +
              '<input type="text" id="call1_error" placeholder="Enter Error Received">' +
            '</div>' +
            '<div class="call-example">' +
              '<strong>Call Examples 2</strong>' +
              '<label for="call2_datetime">Date & Time:</label>' +
              '<input type="text" id="call2_datetime" placeholder="Enter Date & Time">' +
              '<label for="call2_phone">Phone Number:</label>' +
              '<input type="text" id="call2_phone" placeholder="Enter Phone Number">' +
              '<label for="call2_destination">Destination Number:</label>' +
              '<input type="text" id="call2_destination" placeholder="Enter Destination Number">' +
              '<label for="call2_error">Error Received:</label>' +
              '<input type="text" id="call2_error" placeholder="Enter Error Received">' +
            '</div>' +
            '<div class="call-example">' +
              '<strong>Call Examples 3</strong>' +
              '<label for="call3_datetime">Date & Time:</label>' +
              '<input type="text" id="call3_datetime" placeholder="Enter Date & Time">' +
              '<label for="call3_phone">Phone Number:</label>' +
              '<input type="text" id="call3_phone" placeholder="Enter Phone Number">' +
              '<label for="call3_destination">Destination Number:</label>' +
              '<input type="text" id="call3_destination" placeholder="Enter Destination Number">' +
              '<label for="call3_error">Error Received:</label>' +
              '<input type="text" id="call3_error" placeholder="Enter Error Received">' +
            '</div>' +
          '</div>';
      } else if (provider === "grid") {
        container.innerHTML =
          '<label for="mallName">Mall Name:</label>' +
          '<input type="text" id="mallName" placeholder="Enter Mall Name">' +
          '<label for="managementReit">Management/REIT:</label>' +
          '<input type="text" id="managementReit" placeholder="Enter Management/REIT">' +
          '<label for="mdf">MDF:</label>' +
          '<input type="text" id="mdf" placeholder="Enter MDF">' +
          '<label for="idf">IDF:</label>' +
          '<input type="text" id="idf" placeholder="Enter IDF">' +
          '<label for="port">Port:</label>' +
          '<input type="text" id="port" placeholder="Enter Port">' +
          '<label for="speeds">Speeds:</label>' +
          '<input type="text" id="speeds" placeholder="Enter Speeds">' +
          '<label for="staticOrDhcp">Static or DHCP:</label>' +
          '<input type="text" id="staticOrDhcp" placeholder="Enter Static or DHCP">' +
          '<label for="staticIPAddresses">Static IP Addresses:</label>' +
          '<input type="text" id="staticIPAddresses" placeholder="Enter Static IP Addresses">';
      } else {
        container.innerHTML = "";
      }
    }
    
    function generateTemplate() {
      console.log("generateTemplate triggered");
      let template = "";
      
      // Helper: only add line if value is non-empty.
      function addTemplateLine(label, value) {
        if (value && value.trim() !== "") {
          template += "<strong>" + label + ":</strong> " + value + "<br>";
        }
      }
      
      template += "<strong>Ticket Update Template</strong><br>";
      template += "<strong>--------------------------</strong><br><br>";
      
      const callType = document.querySelector('input[name="callType"]:checked')?.value || "";
      
      if (callType === "ticketCreation") {
        addTemplateLine("Update Type", "Ticket Creation");
        const tc_accountNumber = document.getElementById("tc_accountNumber")?.value || "";
        const tc_callersName = document.getElementById("tc_callersName")?.value || "";
        const tc_callersNumber = document.getElementById("tc_callersNumber")?.value || "";
        const tc_lconName = document.getElementById("tc_lconName")?.value || "";
        const tc_lconNumber = document.getElementById("tc_lconNumber")?.value || "";
        const tc_businessHours = document.getElementById("tc_businessHours")?.value || "";
        const tc_accessHours = document.getElementById("tc_accessHours")?.value || "";
        const tc_accessInstructions = document.getElementById("tc_accessInstructions")?.value || "";
        const tc_carrierInfo = document.getElementById("tc_carrierInfo")?.value || "";
        const tc_carrierTicket = document.getElementById("tc_carrierTicket")?.value || "";
        const tc_problemStatement = document.getElementById("tc_problemStatement")?.value || "";
        const tc_troubleshootingResults = document.getElementById("tc_troubleshootingResults")?.value || "";
        const tc_currentStatus = document.getElementById("tc_currentStatus")?.value || "";
        const tc_recommendedNextSteps = document.getElementById("tc_recommendedNextSteps")?.value || "";
        
        addTemplateLine("Account Number", tc_accountNumber);
        addTemplateLine("Caller's Name", tc_callersName);
        addTemplateLine("Caller's Number", tc_callersNumber);
        addTemplateLine("LCON Name", tc_lconName);
        addTemplateLine("LCON Number", tc_lconNumber);
        addTemplateLine("Business Hours", tc_businessHours);
        addTemplateLine("Access Hours (For IWs)", tc_accessHours);
        addTemplateLine("Access Special Instructions", tc_accessInstructions);
        addTemplateLine("Carrier Info", tc_carrierInfo);
        addTemplateLine("Carrier Ticket", tc_carrierTicket);
        addTemplateLine("Current Problem Statement/Issue", tc_problemStatement);
        addTemplateLine("Troubleshooting Performed and Results", tc_troubleshootingResults);
        addTemplateLine("Current Status", tc_currentStatus);
        addTemplateLine("Recommended Next Steps", tc_recommendedNextSteps);
      } else { // General Ticket Update
        addTemplateLine("Update Type", "General Ticket Update");
        const ticketUpdateReason = document.getElementById("ticketUpdateReason")?.value || "";
        addTemplateLine("Ticket Update Reason", ticketUpdateReason);
        
        const updateCallType = document.querySelector('input[name="updateCallType"]:checked')?.value || "";
        addTemplateLine("Call Update Type", updateCallType);
        
        const std_currentProblemStatement = document.getElementById("currentProblemStatement")?.value || "";
        const troubleshootingResults = document.getElementById("troubleshootingResults")?.value || "";
        const currentStatus = document.getElementById("currentStatus")?.value || "";
        const recommendedNextSteps = document.getElementById("recommendedNextSteps")?.value || "";
        
        addTemplateLine("Current Problem Statement/Issue", std_currentProblemStatement);
        addTemplateLine("Troubleshooting Performed and Results", troubleshootingResults);
        addTemplateLine("Current Status", currentStatus);
        addTemplateLine("Recommended Next Steps", recommendedNextSteps);
      }
      
      const provider = document.querySelector('input[name="provider"]:checked')?.value || "";
      addTemplateLine("Dedicated Team", provider ? provider : "None");
      
      if (provider === "voip") {
        const phoneNumberIssue = document.getElementById("phoneNumberIssue")?.value || "";
        const numbersAffected = document.getElementById("numbersAffected")?.value || "";
        const callFeaturesAffected = document.getElementById("callFeaturesAffected")?.value || "";
        const macAddress = document.getElementById("macAddress")?.value || "";
        const serialNumber = document.getElementById("serialNumber")?.value || "";
        const adtranIP = document.getElementById("adtranIP")?.value || "";
        
        addTemplateLine("All/Partial/Single Phone Number Issue", phoneNumberIssue);
        addTemplateLine("Number(s) Affected", numbersAffected);
        addTemplateLine("Call Feature(s) Affected", callFeaturesAffected);
        addTemplateLine("Mac Address", macAddress);
        addTemplateLine("Serial Number", serialNumber);
        addTemplateLine("Adtran LB IP Address", adtranIP);
        
        const call1_datetime = document.getElementById("call1_datetime")?.value || "";
        const call1_phone = document.getElementById("call1_phone")?.value || "";
        const call1_destination = document.getElementById("call1_destination")?.value || "";
        const call1_error = document.getElementById("call1_error")?.value || "";
        addTemplateLine("Call Examples 1 - Date & Time", call1_datetime);
        addTemplateLine("Call Examples 1 - Phone Number", call1_phone);
        addTemplateLine("Call Examples 1 - Destination Number", call1_destination);
        addTemplateLine("Call Examples 1 - Error Received", call1_error);
        
        const call2_datetime = document.getElementById("call2_datetime")?.value || "";
        const call2_phone = document.getElementById("call2_phone")?.value || "";
        const call2_destination = document.getElementById("call2_destination")?.value || "";
        const call2_error = document.getElementById("call2_error")?.value || "";
        addTemplateLine("Call Examples 2 - Date & Time", call2_datetime);
        addTemplateLine("Call Examples 2 - Phone Number", call2_phone);
        addTemplateLine("Call Examples 2 - Destination Number", call2_destination);
        addTemplateLine("Call Examples 2 - Error Received", call2_error);
        
        const call3_datetime = document.getElementById("call3_datetime")?.value || "";
        const call3_phone = document.getElementById("call3_phone")?.value || "";
        const call3_destination = document.getElementById("call3_destination")?.value || "";
        const call3_error = document.getElementById("call3_error")?.value || "";
        addTemplateLine("Call Examples 3 - Date & Time", call3_datetime);
        addTemplateLine("Call Examples 3 - Phone Number", call3_phone);
        addTemplateLine("Call Examples 3 - Destination Number", call3_destination);
        addTemplateLine("Call Examples 3 - Error Received", call3_error);
      } else if (provider === "grid") {
        const mallName = document.getElementById("mallName")?.value || "";
        const managementReit = document.getElementById("managementReit")?.value || "";
        const mdf = document.getElementById("mdf")?.value || "";
        const idf = document.getElementById("idf")?.value || "";
        const port = document.getElementById("port")?.value || "";
        const speeds = document.getElementById("speeds")?.value || "";
        const staticOrDhcp = document.getElementById("staticOrDhcp")?.value || "";
        const staticIPAddresses = document.getElementById("staticIPAddresses")?.value || "";
        addTemplateLine("Mall Name", mallName);
        addTemplateLine("Management/REIT", managementReit);
        addTemplateLine("MDF", mdf);
        addTemplateLine("IDF", idf);
        addTemplateLine("Port", port);
        addTemplateLine("Speeds", speeds);
        addTemplateLine("Static or DHCP", staticOrDhcp);
        addTemplateLine("Static IP Addresses", staticIPAddresses);
      }
      
      const troubleshootingOther = document.getElementById("troubleshootingOther")?.value || "";
      addTemplateLine("Troubleshooting/Other", troubleshootingOther);
      
      if (template.length > 30000) {
        alert("You have hit the Bryan Limit");
        return;
      }
      
      document.getElementById("result").innerHTML = template;
      document.getElementById("ticketCreatorOutput").innerHTML = template;
      console.log("Template generated:", template);
    }
    
    function copyFormattedTemplate() {
      const htmlContent = document.getElementById("result").innerHTML;
      const blob = new Blob([htmlContent], { type: "text/html" });
      const clipboardItem = new ClipboardItem({ "text/html": blob });
      navigator.clipboard.write([clipboardItem]).then(function() {
        alert("Template (with formatting) copied to clipboard!");
      }, function(err) {
        alert("Failed to copy: " + err);
      });
    }
    
    function highlightOutput() {
      var output = document.getElementById("result");
      var range = document.createRange();
      range.selectNodeContents(output);
      var selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
    }
    
    function clearOutput() {
      document.getElementById("result").innerHTML = "";
      document.getElementById("ticketCreatorOutput").innerHTML = "";
      document.getElementById("ticketForm").reset();
      handleCallTypeChange();
      handleProviderChange();
    }
    
    handleCallTypeChange();
    
    document.getElementById("toggleSidePanels").addEventListener("click", function() {
      var left = document.querySelector(".left-container");
      var right = document.querySelector(".right-container");
      if(left.style.display === "none") {
        left.style.display = "block";
        right.style.display = "block";
      } else {
        left.style.display = "none";
        right.style.display = "none";
      }
    });
    
    document.getElementById("ticketCreatorButton").addEventListener("click", function() {
      var btn = document.getElementById("ticketCreatorButton");
      var msg = document.getElementById("ticketMessage");
      btn.disabled = true;
      msg.style.display = "block";
      msg.style.opacity = 1;
      setTimeout(function() {
        msg.style.opacity = 0;
        setTimeout(function(){
          msg.style.display = "none";
          btn.disabled = false;
        }, 1000);
      }, 5000);
    });
  </script>
</body>
</html>
