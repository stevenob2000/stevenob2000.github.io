<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ticket Update Generator (TUG)</title>
  <style>
    body {
      background-color: #3B5CA9;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s;
    }
    .hidden {
      display: none !important;
    }
    .toggle-container {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 24px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #2196F3;
    }
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    .page-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      min-height: 100vh;
    }
    .left-container,
    .middle-container,
    .right-container {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    .left-container { width: 25%; }
    .middle-container { width: 50%; position: relative; }
    .right-container { width: 25%; }
    @media (max-width: 768px) {
      .page-container {
        flex-direction: column;
        align-items: center;
      }
      .left-container, .middle-container, .right-container { width: 90%; }
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .header h1, .header h2 { margin: 0; flex: 1; text-align: center; }
    .subheader {
      text-align: center;
      font-size: 0.9em;
      color: #999;
      margin-bottom: 15px;
      transition: color 0.3s;
    }
    label { display: block; margin-top: 10px; }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    button { padding: 10px 15px; cursor: pointer; }
    .full-width-btn { width: 100%; margin-top: 15px; }
    #result, #ticketCreatorOutput {
      margin-top: 20px;
      white-space: pre-wrap;
      background: #f4f4f4;
      padding: 10px;
      border: 1px solid #ccc;
      min-height: 150px;
      font-size: 14px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    .radio-group { margin-top: 5px; }
    .radio-group label {
      display: inline-block;
      margin-right: 15px;
      font-weight: normal;
      cursor: pointer;
    }
    .radio-group input[type="radio"] {
      margin-right: 5px;
      width: 20px;
      height: 20px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      border: 2px solid #555;
      border-radius: 0;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
    }
    .radio-group input[type="radio"]:checked {
      background-color: #555;
      border-color: #555;
    }
    .dark-mode .radio-group input[type="radio"] { border-color: #bbb; }
    .dark-mode .radio-group input[type="radio"]:checked {
      background-color: #03dac6;
      border-color: #03dac6;
    }
    .radio-group input[type="radio"]:focus {
      outline: none;
      box-shadow: 0 0 2px 2px rgba(85, 85, 85, 0.5);
    }
    .fields-container { margin-top: 15px; }
    .action-container, .copy-container {
      display: flex; gap: 10px; margin-top: 10px;
    }
    .action-container button, .copy-container button { flex: 1; width: 100%; }
    .call-examples-container {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .call-example { flex: 1; }
    footer {
      text-align: center;
      margin-top: 20px;
      font-size: 0.8em;
      color: #fff;
    }
    #ticketMessage {
      text-align: center;
      margin-top: 10px;
      opacity: 1;
      transition: opacity 1s ease-out;
    }
    #errorMessage {
      color: red;
      margin-top: 10px;
      font-weight: bold;
      display: none;
    }
    .dark-mode {
      background-color: #222;
      color: #fff;
    }
    .dark-mode .left-container,
    .dark-mode .middle-container,
    .dark-mode .right-container {
      background-color: #000;
      color: #fff;
      border-color: #555;
    }
    .dark-mode input, .dark-mode textarea {
      background-color: #333;
      color: #fff;
      border: 1px solid #555;
    }
    .dark-mode #result, .dark-mode #ticketCreatorOutput {
      background-color: #000;
      color: #fff;
      border-color: #555;
    }
    .dark-mode .subheader { color: #ccc; }
    /* New CSS for two-column layout */
    .two-column {
      display: flex;
      gap: 20px;
    }
    .two-column .column { flex: 1; }
  </style>
</head>
<body>
  <div class="page-container">
    <!-- Left container (Account Loader - hidden) -->
    <div class="left-container hidden">
      <div class="header">
        <h2>Account Loader</h2>
      </div>
      <div class="subheader">Non-functional, for demonstration purposes only</div>
      <form id="leftForm" role="form" aria-label="Account Loader Form">
        <!-- ... account loader fields ... -->
        <button type="button" class="full-width-btn">Pull Account Info</button>
      </form>
    </div>
    
    <!-- Middle container (Main Form) -->
    <div class="middle-container">
      <div class="header">
        <div class="toggle-container">
          <label for="darkModeSwitch">Dark Mode:</label>
          <label class="switch">
            <input type="checkbox" id="darkModeSwitch">
            <span class="slider"></span>
          </label>
        </div>
        <h1>Ticket Update Generator (TUG)</h1>
        <div class="toggle-container">
          <label for="sidePanelsSwitch">Side Panels:</label>
          <label class="switch">
            <input type="checkbox" id="sidePanelsSwitch">
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <div class="subheader">Functional Version 1</div>
      <form id="ticketForm" role="form" aria-label="Ticket Update Generator Form">
        <label>Update Type:</label>
        <div class="radio-group">
          <label>
            <input type="radio" name="callType" value="ticketCreation" checked onchange="handleCallTypeChange()">
            Ticket Creation
          </label>
          <label>
            <input type="radio" name="callType" value="nocall" onchange="handleCallTypeChange()">
            General Ticket Update
          </label>
        </div>
        
        <!-- Ticket Creation section -->
        <div id="ticketCreationFields" class="fields-container" style="display: block;">
          <div class="two-column">
            <div class="column">
              <label for="tc_callersName">POC/Caller Name:</label>
              <input type="text" id="tc_callersName" placeholder="Enter POC/Caller Name">
              <label for="tc_callersNumber">POC/Caller Number:</label>
              <input type="text" id="tc_callersNumber" placeholder="Enter POC/Caller Number">
            </div>
            <div class="column">
              <label for="tc_lconName">LCON Name:</label>
              <input type="text" id="tc_lconName" placeholder="Enter LCON name">
              <label for="tc_lconNumber">LCON Number:</label>
              <input type="text" id="tc_lconNumber" placeholder="Enter LCON number">
            </div>
          </div>
          <!-- Additional Ticket Creation fields -->
          <!-- ... other Ticket Creation fields ... -->
        </div>
        
        <!-- General Ticket Update section -->
        <div id="standardFields" class="fields-container" style="display: none;">
          <label for="ticketUpdateReason">Ticket Update Reason:</label>
          <input type="text" id="ticketUpdateReason" placeholder="Enter ticket update reason">
          <label>Is this ticket update due to call or other?</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="updateCallType" value="nocall" checked>
              None
            </label>
            <label>
              <input type="radio" name="updateCallType" value="inbound">
              Inbound Call
            </label>
            <label>
              <input type="radio" name="updateCallType" value="outbound">
              Outbound Call
            </label>
            <label>
              <input type="radio" name="updateCallType" value="teams">
              Teams
            </label>
            <label>
              <input type="radio" name="updateCallType" value="email">
              Email
            </label>
            <label>
              <input type="radio" name="updateCallType" value="other">
              Other
            </label>
          </div>
          <!-- Extra input container -->
          <div id="updateCallTypeExtraField"></div>
          <!-- Additional General Ticket Update fields -->
          <!-- ... other General fields ... -->
        </div>
        
        <!-- Dedicated Team section and Troubleshooting/Other field -->
        <!-- ... other form sections ... -->
        
        <div class="action-container">
          <button type="button" onclick="generateTemplate()">Generate Template</button>
          <button type="button" onclick="clearOutput()">Clear All</button>
        </div>
        <div id="errorMessage" role="alert"></div>
      </form>
      
      <h2>Generated Ticket Template:</h2>
      <div id="result"></div>
      
      <div class="copy-container">
        <button type="button" onclick="copyFormattedTemplate()">Copy Formatted Template</button>
        <button type="button" onclick="highlightOutput()">Highlight Output</button>
      </div>
    </div>
    
    <!-- Right container (Ticket Creator - hidden) -->
    <div class="right-container hidden">
      <div class="header">
        <h2>Ticket Creator</h2>
      </div>
      <div class="subheader">Non-functional, for demonstration purposes only</div>
      <h2>Ticket Creator Output:</h2>
      <div id="ticketCreatorOutput"></div>
      <button type="button" id="ticketCreatorButton" class="full-width-btn">Create Ticket</button>
      <div id="ticketMessage" style="display: none;">Ticket created in ConnectWise!</div>
    </div>
  </div>
  
  <footer>
    Created by Steven Burgos, with invaluable support from my teammates.
  </footer>
  
  <script>
    // Attach "change" event listeners to all updateCallType radios
    document.querySelectorAll('input[name="updateCallType"]').forEach(function(radio) {
      radio.addEventListener("change", updateCallTypeExtra);
    });
    
    // Function to update the extra input field based on the selected call update type
    function updateCallTypeExtra() {
      var selected = document.querySelector('input[name="updateCallType"]:checked')?.value;
      var container = document.getElementById("updateCallTypeExtraField");
      // Clear previous content:
      container.innerHTML = "";
      
      if (selected === "inbound") {
        container.innerHTML = `
          <label for="updateCallTypeExtra">Inbound Name & Number:</label>
          <input type="text" id="updateCallTypeExtra" placeholder="Enter Inbound Name & Number">
        `;
      } else if (selected === "outbound") {
        container.innerHTML = `
          <label for="updateCallTypeExtra">Outbound Name & Number:</label>
          <input type="text" id="updateCallTypeExtra" placeholder="Enter Outbound Name & Number">
        `;
      } else if (selected === "teams") {
        container.innerHTML = `
          <label for="updateCallTypeExtra">Teams Chat/Team/Channel:</label>
          <input type="text" id="updateCallTypeExtra" placeholder="Enter Teams Chat/Team/Channel">
        `;
      } else if (selected === "email") {
        container.innerHTML = `
          <label for="updateCallTypeExtra">Provide Email Link or Subject Line:</label>
          <input type="text" id="updateCallTypeExtra" placeholder="Enter Email Link or Subject Line">
        `;
      } else if (selected === "other") {
        container.innerHTML = `
          <label for="updateCallTypeExtra">Please Describe Other:</label>
          <input type="text" id="updateCallTypeExtra" placeholder="Enter description">
        `;
      }
      // If "nocall" is selected, the container remains empty.
    }
    
    // (Other functions like generateTemplate, clearOutput, handleCallTypeChange, etc., remain the same)
    
    function generateTemplate() {
      // ... existing template generation code ...
    }
    
    function clearOutput() {
      if (!confirm("Are you sure you want to clear all?")) return;
      document.getElementById("result").innerHTML = "";
      document.getElementById("ticketCreatorOutput").innerHTML = "";
      document.getElementById("ticketForm").reset();
      handleCallTypeChange();
      updateCallTypeExtra();
    }
    
    function handleCallTypeChange() {
      const callType = document.querySelector('input[name="callType"]:checked')?.value || "";
      if (callType === "ticketCreation") {
        document.getElementById("ticketCreationFields").style.display = "block";
        document.getElementById("standardFields").style.display = "none";
      } else {
        document.getElementById("ticketCreationFields").style.display = "none";
        document.getElementById("standardFields").style.display = "block";
        updateCallTypeExtra();
      }
    }
    
    // (Other functions: updateSidePanels, copyFormattedTemplate, highlightOutput, etc.)
  </script>
</body>
</html>
